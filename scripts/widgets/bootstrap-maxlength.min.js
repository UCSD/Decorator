!function(t){"use strict";t.event.special.destroyed||(t.event.special.destroyed={remove:function(t){t.handler&&t.handler()}}),t.fn.extend({maxlength:function(e,a){function n(t){var e=t.charCodeAt();return e?e<128?1:e<2048?2:3:0}function o(t){return t.split("").map(n).concat(0).reduce(function(t,e){return t+e})}function s(t){var a=t.val();a=e.twoCharLinebreak?a.replace(/\r(?!\n)|\n(?!\r)/g,"\r\n"):a.replace(new RegExp("\r?\n","g"),"\n");return e.utf8?o(a):a.length}function r(t,a){var s=t.val();if(e.twoCharLinebreak&&"\n"===(s=s.replace(/\r(?!\n)|\n(?!\r)/g,"\r\n"))[s.length-1]&&(a-=s.length%2),e.utf8){for(var r=s.split("").map(n),i=0,l=o(s)-a;i<l;i+=r.pop());a-=a-r.length}t.val(s.substr(0,a))}function i(t,a,n){var o=!0;return!e.alwaysShow&&n-s(t)>a&&(o=!1),o}function l(t,e){return e-s(t)}function c(t,e){e.css({display:"block"}),t.trigger("maxlength.shown")}function p(t,a){e.alwaysShow||(a.css({display:"none"}),t.trigger("maxlength.hidden"))}function h(t,a,n){var o="";return e.message?o="function"==typeof e.message?e.message(t,a):e.message.replace("%charsTyped%",n).replace("%charsRemaining%",a-n).replace("%charsTotal%",a):(e.preText&&(o+=e.preText),e.showCharsTyped?o+=n:o+=a-n,e.showMaxLength&&(o+=e.separator+a),e.postText&&(o+=e.postText)),o}function f(t,a,n,o){o&&(o.html(h(a.val(),n,n-t)),t>0?i(a,e.threshold,n)?c(a,o.removeClass(e.limitReachedClass).addClass(e.warningClass)):p(a,o):c(a,o.removeClass(e.warningClass).addClass(e.limitReachedClass))),e.customMaxAttribute&&(t<0?a.addClass("overmax"):a.removeClass("overmax"))}function u(e){var a=e[0];return t.extend({},"function"==typeof a.getBoundingClientRect?a.getBoundingClientRect():{width:a.offsetWidth,height:a.offsetHeight},e.offset())}function d(a,n){if(a&&n){var o=["top","bottom","left","right","position"],s={};t.each(o,function(t,a){var n=e.placement[a];void 0!==n&&(s[a]=n)}),n.css(s)}}function g(a,n){var o=u(a);if("function"!==t.type(e.placement))if(t.isPlainObject(e.placement))d(e.placement,n);else{var s=a.outerWidth(),r=n.outerWidth(),i=n.width(),l=n.height();switch(e.appendToParent&&(o.top-=a.parent().offset().top,o.left-=a.parent().offset().left),e.placement){case"bottom":n.css({top:o.top+o.height,left:o.left+o.width/2-i/2});break;case"top":n.css({top:o.top-l,left:o.left+o.width/2-i/2});break;case"left":n.css({top:o.top+o.height/2-l/2,left:o.left-i});break;case"right":n.css({top:o.top+o.height/2-l/2,left:o.left+o.width});break;case"bottom-right":n.css({top:o.top+o.height,left:o.left+o.width});break;case"top-right":n.css({top:o.top-l,left:o.left+s});break;case"top-left":n.css({top:o.top-l,left:o.left-r});break;case"bottom-left":n.css({top:o.top+a.outerHeight(),left:o.left-r});break;case"centered-right":n.css({top:o.top+l/2,left:o.left+s-r-3});break;case"bottom-right-inside":n.css({top:o.top+o.height,left:o.left+o.width-r});break;case"top-right-inside":n.css({top:o.top-l,left:o.left+s-r});break;case"top-left-inside":n.css({top:o.top-l,left:o.left});break;case"bottom-left-inside":n.css({top:o.top+a.outerHeight(),left:o.left})}}else e.placement(a,n,o)}function m(){return"bottom-right-inside"===e.placement||"top-right-inside"===e.placement||"function"==typeof e.placement||e.message&&"function"==typeof e.message}function b(t){var a=t.attr("maxlength")||e.customMaxAttribute;if(e.customMaxAttribute&&!e.allowOverMax){var n=t.attr(e.customMaxAttribute);(!a||n<a)&&(a=n)}return a||(a=t.attr("size")),a}var v=t("body"),x={showOnReady:!1,alwaysShow:!1,threshold:10,warningClass:"label label-success",limitReachedClass:"label label-important label-danger",separator:" / ",preText:"",postText:"",showMaxLength:!0,placement:"bottom",message:null,showCharsTyped:!0,validate:!1,utf8:!1,appendToParent:!1,twoCharLinebreak:!0,customMaxAttribute:null,allowOverMax:!1};return t.isFunction(e)&&!a&&(a=e,e={}),e=t.extend(x,e),this.each(function(){function a(){var a=h(s.val(),n,"0");n=b(s),o||(o=t('<span class="bootstrap-maxlength"></span>').css({display:"none",position:"absolute",whiteSpace:"nowrap",zIndex:1099}).html(a)),s.is("textarea")&&(s.data("maxlenghtsizex",s.outerWidth()),s.data("maxlenghtsizey",s.outerHeight()),s.mouseup(function(){s.outerWidth()===s.data("maxlenghtsizex")&&s.outerHeight()===s.data("maxlenghtsizey")||g(s,o),s.data("maxlenghtsizex",s.outerWidth()),s.data("maxlenghtsizey",s.outerHeight())})),e.appendToParent?(s.parent().append(o),s.parent().css("position","relative")):v.append(o),f(l(s,b(s)),s,n,o),g(s,o)}var n,o,s=t(this);t(window).resize(function(){o&&g(s,o)}),e.showOnReady?s.ready(function(){a()}):s.focus(function(){a()}),s.on("maxlength.reposition",function(){g(s,o)}),s.on("destroyed",function(){o&&o.remove()}),s.on("blur",function(){o&&!e.showOnReady&&o.remove()}),s.on("input",function(){var t=b(s),a=l(s,t),i=!0;return e.validate&&a<0?(r(s,t),i=!1):f(a,s,n,o),m()&&g(s,o),i})})}})}(jQuery);